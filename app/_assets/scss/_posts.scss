$thumbnail-width:       100%;
$thumbnail-height:      180px;
$border-radius-left:    50%;
$border-radius-right:   50%;
$border-color:          darken($accent-color, 20%);
$double-spacer:         $spacer * 2;
$heading-bg-color:      rgba($body-bg-compliment, 0.7);

.post-preview {
  margin-top: $spacer;

  .thumbnail {
    max-width: 700px;
    width: $thumbnail-width;
    height: $thumbnail-height;
    overflow: hidden;
    margin-bottom: $spacer;
    position: relative;
    overflow: hidden;

    img {
      position: absolute;
      top: -100%;
      bottom: -100%;
      left: -100%;
      right: -100%;
      margin: auto;
    }

  }

  h1 {
    margin: 0px;

    @media only screen and (max-width:480px) {
      & {
        margin-top: $spacer !important;
      }
    }

  }

  .meta {
    font-size: $font-size-small;
    margin-top: 0px;
  }

}

.post {
  margin-bottom: $spacer;

  .hero {
    position: relative;
    border-bottom: solid $border-width $body-bg-compliment;
    background-color: $accent-color;
    overflow: hidden;

    .teaser {
      display: none;
      position: absolute;
      background-color: $accent-color-compliment;
      border: dashed lighten($accent-color-compliment, 15%) 1px;
      color: lighten($accent-color-compliment, 40%);
      text-align: center;
      transform: rotate(-45deg);
      left: -120px;
      top: 60px;
      padding: 10px 150px;
      text-shadow: $body-bg-compliment 1px 1px 1px;
      font-size: $font-size-base;
      text-transform: uppercase;
      letter-spacing: 1px;

      @media only screen and (max-width:480px) {
        & {
          display: none !important;
        }
      }
    }

    .heading {
      position: absolute;
      bottom: 5%;
      width: 100%;
      text-align: center;

      h1 {
        font-size: $font-size-h1 + 20 !important;
        text-shadow: 2px 2px 5px $body-bg;
        background-color: $heading-bg-color;
        padding: 10px 25px;
        display: inline-block;

        a {
          color: $text-color;
        }

      }

      .meta {
        text-shadow: 2px 2px 5px $body-bg;
        background-color: $heading-bg-color;
        padding: 10px 25px;
        display: inline-block;
        margin-top: 10px;
        font-size: $font-size-base;
      }

    }

    #image {
      width: 100%;
      display: inline-block;
      vertical-align: middle;
      font: 0/0 serif;
      text-shadow: none;
      color: transparent;
      background-size: 100%;
      background-position: 50% 50%;
      background-repeat: no-repeat;

      @media only screen and (max-width:480px) {
        & {
          height: 180px;
          background-size: 200%;
        }
      }

      .inner {
        display: block;
        height: 0;
      }

    }

  }

  .photo-attribution {
    font-size: $font-size-small;
    line-height: $line-height-small;
    font-style: italic;
    margin-bottom: $spacer;
    text-align: right;
    padding-right: $spacer;

    @media only screen and (max-width:480px) {
      & {
        line-height: $line-height-small * 1.75;
        margin-bottom: $spacer / 2;
      }

      & ~ .container > header > h1 {
        margin-top: 0px !important;
      }

    }

  }

  h1 {
    margin: 0px;

    @media only screen and (max-width:480px) {
      & {
        margin-top: $spacer !important;
      }
    }

  }

  .meta {
    font-size: $font-size-small;
    margin-top: 0px;
  }

  .content {
    margin-bottom: $spacer * 3;

    figure {
      text-align: center;
      font-size: $font-size-small;

      img {
        margin-bottom: $spacer / 2;
      }

    }

    hr {
      border-top: solid 1px lighten($body-bg-compliment, 10%);
      margin-bottom: 5px;
    }

    .navigator {

      .next-page {
        float:right;

        @media only screen and (max-width:480px) {
          & {
            float: none;
            display: block;
          }
        }

      }

    }

    iframe.twitter-tweet,
    twitterwidget.twitter-tweet {
      max-width: auto;
      margin: 0 auto;
    }

  }

}

.summary {

  .hero {

    .teaser {
      display: block;
    }

    h1 {
      border-top: solid 10px $accent-color-compliment;
    }

  }

  h2 {
    a:hover, a:focus {
      text-decoration: none;
    }

  }
}

.tag {
  .thumbnail {
    width: 150px;
    height: 150px;
    margin-right: $spacer;
    margin-bottom: 10px;
    float: left;
    border-radius: 50%;

    img {
      width: 500px;
      height: 150px;
      margin-left: -120%;
    }
  }
}

.hang-heading .hero .heading {
  bottom: 20%;
}

@media only screen and (max-width: 960px) {
  .hero .heading {
    display: none;
  }
}

@media only screen and (min-width: 960px) {
  header.show-on-smaller {
    display: none;
  }
}

$youtube-aspect-ratio: 1.9;
.youtube {
  width:100%;
}

@media only screen and (max-width: 320px) {
  .youtube {
    height: floor(320px / $youtube-aspect-ratio);
  }
}

@media only screen and (min-width: 321px) and (max-width: 480px) {
  .youtube {
    height: floor(480px / $youtube-aspect-ratio);
  }
}

@media only screen and (min-width: 481px) and (max-width: 640px) {
  .youtube {
    height: floor(640px / $youtube-aspect-ratio);
  }
}

@media only screen and (min-width: 641px) {
  .youtube {
    height: floor(700px / $youtube-aspect-ratio);
  }
}

@media only screen and (max-width:480px) {
  .post .meta, .post-preview .meta {
    margin-top: 5px;
  }
}
